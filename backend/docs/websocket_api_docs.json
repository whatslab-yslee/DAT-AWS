{
    "description": "<hr><div><h2>WebSocket API 정의</h2><p>해당 파트는 WebSocket을 통해 서버와 클라이언트(VR) 간에 실시간으로 주고받는 메시지에 대한 명세입니다.</p><p><a href='https://dat-temp.whatslab.co.kr/api/test/mock-vr'>Mock VR Client</a>에서 테스트 가능합니다.</p><h3>연결 정보</h3><ul><li><strong>연결 엔드포인트</strong>: <code>wss://dat-temp.whatslab.co.kr/api/ws/{client_id}</code></li><li><strong>설명</strong>: <code>client_id</code>는 환자(patient)의 고유 ID입니다.</li></ul><details><summary>서버 → 클라이언트 (VR) 메시지</summary><div style=\"padding-left: 25px; margin-top: 10px;\"><details><summary>1. 진단 시작 (s_start_diagnosis)</summary><div style=\"padding-left: 25px; margin-top: 10px;\"><ul><li><strong>Action</strong>: <code>s_start_diagnosis</code></li><li><strong>설명</strong>: 의사가 웹에서 진단을 시작하면, 서버는 해당 환자(patient) 클라이언트에게 이 메시지를 보내 진단 시작을 알립니다.</li><li><strong>Data Payload</strong>:<table><thead><tr><th>필드</th><th>타입</th><th>설명</th></tr></thead><tbody><tr><td><code>diagnosis_id</code></td><td>integer</td><td>생성된 진단의 고유 ID</td></tr><tr><td><code>type</code></td><td>string</td><td>진단 콘텐츠 타입 (<code>BALANCEBALL</code>, <code>FITBOX</code>, <code>TENNISBALL</code>)</td></tr><tr><td><code>level</code></td><td>integer</td><td>진단 난이도 레벨 (1~3)</td></tr></tbody></table></li><li><strong>예시</strong>:<pre><code>{\n  \"action\": \"s_start_diagnosis\",\n  \"data\": {\n    \"diagnosis_id\": 123,\n    \"type\": \"BALANCEBALL\",\n    \"level\": 2\n  }\n}</code></pre></li></ul></div></details><details><summary>2. 진단 중지 (s_stop_diagnosis)</summary><div style=\"padding-left: 25px; margin-top: 10px;\"><ul><li><strong>Action</strong>: <code>s_stop_diagnosis</code></li><li><strong>설명</strong>: 의사가 웹에서 진행 중인 진단을 취소했을 때 보내는 메시지입니다.</li><li><strong>Data Payload</strong>: <code>null</code></li><li><strong>예시</strong>:<pre><code>{\n  \"action\": \"s_stop_diagnosis\",\n  \"data\": null\n}</code></pre></li></ul></div></details><details><summary>3. 강제 연결 해제 (s_force_disconnect)</summary><div style=\"padding-left: 25px; margin-top: 10px;\"><ul><li><strong>Action</strong>: <code>s_force_disconnect</code></li><li><strong>설명</strong>: 중복 접속 등 서버가 클라이언트의 연결을 강제로 끊어야 할 때 보내는 메시지입니다.</li><li><strong>Data Payload</strong>: <code>null</code></li><li><strong>예시</strong>:<pre><code>{\n  \"action\": \"s_force_disconnect\",\n  \"data\": null\n}</code></pre></li></ul></div></details></div></details><details><summary>클라이언트 (VR) → 서버 메시지</summary><div style=\"padding-left: 25px; margin-top: 10px;\"><details><summary>1. 진단 결과 업로드 (c_upload_result)</summary><div style=\"padding-left: 25px; margin-top: 10px;\"><ul><li><strong>Action</strong>: <code>c_upload_result</code></li><li><strong>설명</strong>: 진단이 정상적으로 완료된 후, 결과 데이터(CSV)를 서버로 전송합니다.</li><li><strong>Data Payload</strong>:<table><thead><tr><th>필드</th><th>타입</th><th>설명</th></tr></thead><tbody><tr><td><code>diagnosis_id</code></td><td>integer</td><td>현재 진행된 진단의 ID</td></tr><tr><td><code>file_content</code></td><td>string</td><td>진단 결과 CSV 파일의 전체 내용 (문자열)</td></tr></tbody></table></li><li><strong>예시</strong>:<pre><code>{\n  \"action\": \"c_upload_result\",\n  \"data\": {\n    \"diagnosis_id\": 123,\n    \"file_content\": \"timestamp,event,x,y,z\\n1672531200,start,0,0,0\\n...\"\n  }\n}</code></pre></li></ul></div></details><details><summary>2. 진단 시작됨 (c_diagnosis_started)</summary><div style=\"padding-left: 25px; margin-top: 10px;\"><ul><li><strong>Action</strong>: <code>c_diagnosis_started</code></li><li><strong>설명</strong>: <code>s_start_diagnosis</code> 메시지를 받고 진단을 성공적으로 시작했을 때 서버에 알립니다.</li><li><strong>Data Payload</strong>:<table><thead><tr><th>필드</th><th>타입</th><th>설명</th></tr></thead><tbody><tr><td><code>diagnosis_id</code></td><td>integer</td><td>시작된 진단의 ID</td></tr></tbody></table></li><li><strong>예시</strong>:<pre><code>{\n  \"action\": \"c_diagnosis_started\",\n  \"data\": {\n    \"diagnosis_id\": 123\n  }\n}</code></pre></li></ul></div></details><details><summary>3. 진단 실패 (c_diagnosis_failed)</summary><div style=\"padding-left: 25px; margin-top: 10px;\"><ul><li><strong>Action</strong>: <code>c_diagnosis_failed</code></li><li><strong>설명</strong>: 진단을 시작하지 못하거나 중간에 실패했을 경우 서버에 알립니다.</li><li><strong>Data Payload</strong>:<table><thead><tr><th>필드</th><th>타입</th><th>설명</th></tr></thead><tbody><tr><td><code>diagnosis_id</code></td><td>integer</td><td>실패한 진단의 ID</td></tr></tbody></table></li><li><strong>예시</strong>:<pre><code>{\n  \"action\": \"c_diagnosis_failed\",\n  \"data\": {\n    \"diagnosis_id\": 123\n  }\n}</code></pre></li></ul></div></details></div></details></div><hr>"
}